<table>
  <input type="text" placeholder="Filter..." (input)="onFilter($event)" />
  <thead>
    <tr>
      <th *ngFor="let column of tableColumns" (click)="onSort(column.field)">
        {{ column.header }}

        <span *ngIf="sortColumn === column.field">
          {{ sortDirection === "asc" ? "▲" : "▼" }}
        </span>
      </th>
      <th>Status</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let row of paginatedData">
      <td *ngFor="let column of tableColumns">
        {{ row[column.field] }}
      </td>

      <!-- change status column -->
      <td>
        <!-- display a dropdown for status if the current user is assigned to the task -->
        <select
          *ngIf="row.assignedTo === currentUser"
          [(ngModel)]="row.status"
          (change)="onStatusChange(row.id, row.status)"
        >
          <option *ngFor="let status of statusOptions" [value]="status">
            {{ status }}
          </option>
        </select>
        <span *ngIf="row.assignedTo !== currentUser">{{ row.status }}</span>
      </td>
      <td>
        <!-- edit and delete buttons -->
        <button
          [disabled]="(row.createdBy !== currentUser) && currentUserRole !== 'Admin'"
          (click)="onEdit(row.id)"
        >
          Edit
        </button>
        <button
          [disabled]="(row.createdBy !== currentUser) && currentUserRole !== 'Admin'"
          (click)="onDelete(row.id)"
        >
          Delete
        </button>
      </td>
    </tr>
  </tbody>
  <div class="pagination">
    <button *ngFor="let page of pages" (click)="onPageChange(page)">
      {{ page }}
    </button>
  </div>
</table>
